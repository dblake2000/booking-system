<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Login — Hair by Lasheka</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body { font-family: Inter, sans-serif; background:#f6fbfb; margin:0; }
      .wrap { max-width:420px; margin:60px auto; background:#fff; padding:24px; border-radius:12px; border:1px solid rgba(0,0,0,.08); box-shadow:0 12px 24px rgba(0,0,0,.06); }
      h1 { margin:0 0 8px; }
      .muted { color:rgba(0,0,0,.55); margin:0 0 16px; }
      label { display:block; margin-top:10px; font-weight:600; }
      input, button { width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(0,0,0,.1); margin-top:6px; font-size:1rem; }
      button { background:#f6cf7a; font-weight:700; color:#3b2f02; margin-top:14px; cursor:pointer; }
      .row { display:flex; gap:10px; margin-top:10px; }
      a.btn { flex:1; display:inline-block; text-align:center; text-decoration:none; padding:10px 12px; border-radius:10px; border:1px solid rgba(0,0,0,.1); background:#fff; }
      .note { margin-top:10px; color:rgba(0,0,0,.6); font-size:.95rem }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1>Login</h1>
      <p class="muted">Clients can log in here. Staff should use the Staff Admin.</p>

      <label>Username</label>
      <input id="username" placeholder="client username" />

      <label>Password</label>
      <input id="password" type="password" placeholder="••••••••" />

      <button onclick="clientLogin()">Client Login</button>

      <div class="row">
        <a class="btn" href="/admin/">Staff Admin</a>
        <a class="btn" href="/api/demo/booking">Back to Booking</a>
      </div>

      <div id="msg" class="note"></div>
    </div>

    <script>
      function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(";").shift();
        return null;
      }
      const csrftoken = getCookie("csrftoken");

      async function clientLogin() {
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();
        if (!username || !password) {
          document.getElementById("msg").textContent = "Enter username and password.";
          return;
        }
        const r = await fetch("/api/auth/login", {
          method: "POST",
          headers: { "Content-Type": "application/json", "X-CSRFToken": csrftoken },
          body: JSON.stringify({ username, password }),
        });
        const data = await r.json();
        document.getElementById("msg").textContent = data.detail || JSON.stringify(data);
        if (r.ok) {
          // back to booking page (now logged in)
          window.location.href = "/api/demo/booking";
        }
      }
    </script>
  </body>
</html>